---
date: '2023-04-15'
before : '2023-04-10'
after : '2023-04-15'
title: 'Hack The Box Machine : Nibbles'
categories: ['C-SEC', 'KOR', 'webhack', 'HTB']
summary: 'HTB 2023 Machine ì¤‘ í•˜ë‚˜ì¸ Nibblesì˜ í’€ì´'
thumbnail: '../contentImages/nibbles/nibbles.png'
---

## 1. Before we begin

![nibbles.png](../contentImages/nibbles/nibbles.png)

ì˜¤ëŠ˜ í’€ì–´ë³¼ ë¬¸ì œëŠ” Hack The Boxì˜ í´ë˜ì‹ ë¨¸ì‹  ì¤‘ í•˜ë‚˜, Nibblesë‹¤. ì–´ë µë‹¤ë©´ ì–´ë µê³  ì‰½ë‹¤ë©´ ì‰¬ìš´ ë¨¸ì‹ ì´ì§€ë§Œ ì´ ì†Œìš”ì‹œê°„ì€ 30minì •ë„ì— Rootê¹Œì§€ ë”¸ ìˆ˜ ìˆì—ˆë‹¤. 

## 2. Information Gathering

![1.png](../contentImages/nibbles/1.png)

ì²˜ìŒ ìŠ¤ìº”ì„ í•´ë³´ë‹ˆ httpê°€ ì—´ë ¤ ìˆë‹¤. websiteë¥¼ í™•ì¸í•´ë³´ì

![2.png](../contentImages/nibbles/2.png)

íìŒ.. ì½”ë“œë¥¼ ë³´ë‹ˆ /nibbleblogë¼ëŠ” ì‚¬ì´íŠ¸ê°€ ìˆ¨ê²¨ì ¸ìˆëŠ” ê²ƒ ê°™ë‹¤.

![3.png](../contentImages/nibbles/3.png)

nibbleblogì— ë“¤ì–´ê°€ ì´ê²ƒì €ê²ƒ ë§Œì ¸ë³´ë‹¤ë³´ë‹ˆ ì´ëŸ¬í•œ ì†ŒìŠ¤ ì½”ë“œê°€ ë‚˜ì™”ë‹¤. 

<aside>
ğŸª– feed.phpê°€ ìˆìœ¼ë‹ˆ *.php & Directory, ì´ ë‘ ê°œë¥¼ enumerate í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

</aside>

![5.png](../contentImages/nibbles/5.png)

ì—¬ëŸ¬ê°€ì§€ directoryë“¤ê³¼ ì—¬ê¸°ì—” ë‚˜ì˜¤ì§€ ì•Šì•˜ì§€ë§Œ, admin.phpê°€ ìˆë‹¤ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

![4.png](../contentImages/nibbles/4.png)

## 3. Initial Foothold

directoryëŠ” ë“¤ì–´ê°€ë³´ë‹ˆ ì´ëŸ° ì‹ìœ¼ë¡œ ë˜ì–´ìˆê³ 

![6.png](../contentImages/nibbles/6.png)

ì´ëŸ° config.bit íŒŒì¼ì´ ìˆëŠ”ë° usernameì€ adminì¸ ë“¯ í•˜ë‹¤. 

<aside>
ğŸª– hydraë¡œ password enumerationì„ í•´ë³´ë‹ˆ passwordëŠ” nibbles ì˜€ë‹¤.

</aside>

![7.png](../contentImages/nibbles/7.png)

admin.phpëŠ” login í™”ë©´ì´ì—ˆê³ , ì•„ê¹Œ ì°¾ì€ ëŒ€ë¡œ username=admin, password=nibblesë¥¼ ë„£ì ì´ëŸ° ê´€ë¦¬ í™”ë©´ì´ ë–´ë‹¤.

<aside>
ğŸª– ì´ ê´€ë¦¬ í™”ë©´ì€ nibbleblog 4.0.3ì„ í™œìš©í•˜ê³  ìˆë‹¤. CVEë¥¼ ê²€ìƒ‰í•´ë³´ë‹ˆ ë°”ë¡œ ë‚˜ì˜¨ë‹¤.

</aside>

![8.png](../contentImages/nibbles/8.png)

## 4. User Privilege

![9.png](../contentImages/nibbles/9.png)

metasploitì—ë„ CVE-2015-6967ì´ ì¡´ì¬í•œë‹¤! ê·¸ëŸ¼ ë¹ ë¥´ê²Œ í™œìš©í•´ë³´ë„ë¡ í•˜ì.

![10.png](../contentImages/nibbles/10.png)

Opitonsë¥¼ ì„¤ì •í•˜ê³  exploitë¥¼ í•˜ë‹ˆ nibbler(user)ê³„ì •ì˜ ê¶Œí•œì„ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.

## 5. Root Privilege

privilege escalationì„ ìœ„í•´ì„œ ë¨¼ì € sudo -lë¥¼ í™•ì¸í•´ë³´ë‹ˆ, monitor.shë¼ëŠ” íŒŒì¼ì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” ë“¯ í•˜ë‹¤.

![11.png](../contentImages/nibbles/11.png)

í™•ì¸í•´ë³´ë‹ˆ. monitor.shì— ëŒ€í•œ ê¶Œí•œì´ read/write/execute, ì¦‰ ì „ë¶€ ì¡´ì¬í•œë‹¤. 

```python
echo "chmod u+s /bin/bash" > monitor.sh
sudo ./monitor.sh
bash -p
```

ì´ë ‡ê²Œ í•˜ë©´ ê°„ë‹¨íˆ privilegeë¥¼ ì–»ì„ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ?

![12.png](../contentImages/nibbles/12.png)

ì‹¤í–‰í•´ë³´ë‹ˆ rootê¶Œí•œì„ ì–»ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.

## 5. í›„ê¸°

guessingë¶€ë¶„ì€ í•­ìƒ ì§œì¦ë‚œë‹¤. ì´ë¶€ë¶„ì€ ì„¼ìŠ¤ë¥¼ ìš”êµ¬í•˜ëŠ” ê²ƒ ê°™ë‹¤. í•˜ì§€ë§Œ ë‹¤ë¥¸ ë¶€ë¶„ì´ì•¼ ë­... í•©ë¦¬ì ì¸ ë¬¸ì œì˜€ë‹¤.

## Source

- Hack The Box 2023
- Me!

