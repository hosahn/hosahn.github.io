---
date: '2022-09-26'
title: '시스템 해킹(4) : 해커스쿨 FTZ Level 1 - 3'
categories: ['C-SEC', 'KOR']
summary: ''
thumbnail: './C_Sec.jpg'
---


### 0. 들어가며

OverTheWire를 통해 간단히 리눅스 명령어/파일구조에 대한 복습을 마쳤다. 이제 본격적으로 pwnable의 세계로 들어가보자...!


...물론 FTZ 레벨 10까지는 OverTheWire처럼 간단한 리눅스 문제나 아주 쉬운 해킹 기법 위주로 나오는 것 같다.


FTZ 로컬 서버 설치에 대해서는 다음의 글을 참고하자!

[FTZ 로컬서버 구축방법 링크](<>)


이 글은 내가 복습할 용도로도 사용하지만, FTZ를 현재 **설치 완료해서 창을 띄워놓고 풀어나가고있는** 독자분들을 위한 글이다. 그렇다고 바로 답만 가져가서 
"히힛 나 패스!" 를 하지는 말도록 하자...

### 1. Level 1


첫 번째 문제에선 일단 먼저 level2의 권한을 가지고 있는 파일들을 스캔해보아야 한다. 그것을 위해선 find에 -user 옵션과 -perm -4300옵션을 주면 된다.

```
find / -user (username) -perm(permission) -4300
```

ExecuteMe라는 파일이 하나 나온다! 이것을 실행시켜보니 어떤 명령이던 



그럼 어떤 명령을 실행시켜달라고 요청할까?
```
/bin/bash
```

당연하게도(...) 쉘 실행시켜달라고 하면 된다. 마치 요술램프가 소원 들어준다고 하니 소원 세 개 들어달라고 소원을 비는것과 같은 이치... 


비밀번호 : hacker or cracker


### 2. Level 2

일단 이것도 먼저 level3의 권한을 가지고 있는 파일을 찾아보자.

```
find / -user (username) -perm(permission) -4300
```

Editor라는 프로그램이 나왔다. 실행시켜보니 일반 vi에디터같은데...


여기서 알아야 할 것은, vi에디터의 경우 :q, :w등의 명령어를 사용하는 콘솔 모드에서 외부 명령도 실행이 가능하다.


물론 이건 해킹 기법이라기보단 그냥 아~ 이렇게도 가능하구나 생각하면 될 것 같다. 따라서 :

```
(vi 에디터에서 외부 명령 사용 가능)
(에디터창 콘솔 모드에서) !bin/bash //level3권한으로 bash 실행
(그 후에) my-pass
```
요롷게 하면 된다.


비밀번호 : can you fly?


### 3. Level 3

Level3는 C++을 모르면 조금 까다롭다. 이러니 C++ 공부는 미리미리 해 놓도록 하자. (나한테 하는 말이다...)


일단 힌트를 봐 보면, autodig라는 프로그램이 lvl4의 권한을 가지고 있는데, 이를 이용해서 권한을 얻으라고 한다. 


autodig의 소스코드는 다음과 같다 :

```

```
**근데 여기서, dig명령이란?**


dig 명령은  DNS 레코드의 정보를 쿼리하기 위해 사용하는 명령어로, 이 autodig라는 프로그램은 이 dig 명령을 간단하게 사용할 수 있게 프로그래밍 되어있다.


소스코드에서 strcpy를 이용해 cmd를 실행시킬텐데, dig @ 뒤에 계속해서 argv[1]와 version.bind chaos txt를 붙여줄것이다. 우리는 argv[1]을 정의해야한다.


당연하지만, argv[0]은 기본적으로 OS에 의해 정의되어있다. 따라서 그냥 매개변수로 우리가 주고싶은 명령을 전달하면 된다.
```
./autodig "/bin/bash; my-pass"
```
로 두개를 동시에 입력하면 끝


비밀번호 : suck my brain

---
## Source

- 해커스쿨 FTZ
- Me!