{"componentChunkName":"component---src-templates-post-template-tsx","path":"/220927/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>0. 들어가기 전에</h3>\n<h3>1. Level 4</h3>\n<p>백도어 문제다.</p>\n<p>백도어란 기본적으로 <strong>해킹이 끝난 후의 처리</strong>라고 생각할 수 있다. 즉, 내가 언제든지 다시 이 서버에 (루트권한으로) 접속할 수 있게 뒷 문을 만들어 놓는 것이다.</p>\n<p>하여튼, hint를 보니 /etc/xinetd.d에 백도어가 있다고 한다. 폴더에 들어가보니 backdoor라는 실행파일이 정말 대놓고(…) 존재한다.</p>\n<p>cat으로 확인해보니 finger라는 서비스를 실행하는 슈퍼데몬 코드이다. 각 파라미터에 대한 설명은 주석으로 달아놓았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">service finger\r\n{\r\n        disable = no //실행 여부\r\n        flags           = REUSE //포트가 사용중인경우 재사용 여부\r\n        socket_type     = stream // stream, raw, dgram\r\n        wait            = no // 다중, 단일\r\n        user            = level5 //권한자 (localhost)\r\n        server          = /home/level4/tmp/backdoor // 실행할 프로그램\r\n        log_on_failure  += USERID\r\n}</code></pre></div>\n<p>권한은 level5유저가 가지고 있고, 실행 파일(server)는 tmp/backdoor에 정의되어있어야 한다.</p>\n<p>하지만 tmp폴더엔 아직 backdoor 실행파일이 존재하지 않기 때문에, 우리가 코딩하면 된다.\r\nftz한정 패스워드를 알려주는 패스워드는 my-pass이기 때문에 다음과 같은 코드를 짠다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">int main(int argc, char**argv){\r\n    system(\"/bin/bash\");\r\n\tsystem(\"my-pass\");\r\n\treturn 0;\r\n}</code></pre></div>\n<p>간단히 my-pass 코드를 실행시키는 코드이다.</p>\n<p>이 코드를 gcc를 이용해 실행파일로 만들고, backdoor를 실행하면 클리어.</p>\n<p>비밀번호 : what is your name?</p>\n<h3>2. level 5</h3>\n<p>hint를 보니, level6의 권한을 가지고 있는 파일을 실행할 시, 임시파일이 /tmp/level5.tmp라는 파일이름으로 생성된다고 한다.</p>\n<p>어떠한 실행파일이 임시파일을 만든다면, 그 임시파일을 내가 미리 만들어놓고, 내가 볼 파일을\r\n추가로 만들어 심볼릭 링크를 걸어놓을 수 있지 않을까?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cd /tmp\r\n\r\nnano copy\r\n\r\nnano level5.tmp</code></pre></div>\n<p>이렇게 해서 두 개의 파일을 만든 후</p>\n<p>이걸 단순히 ln -s copy level5.tmp 로 걸고 level5를 실행시키면 된다.</p>\n<p>ln 명령어는 심볼릭 링크를 만드는 명령어로, 자세한건 우분투 위키를 참조하자.</p>\n<p>실제 프로세스를 실행시킨다면, 임시파일에 프로세스 실행중에 적혔던 내용이 내가 링크된 파일에도\r\n고스란히 복사되어 남게된다.</p>\n<p>비밀번호 : what the hell</p>\n<hr>\n<h2>Source</h2>\n<ul>\n<li>해커스쿨 FTZ</li>\n<li>Me!</li>\n</ul>","frontmatter":{"title":"시스템 해킹(5) : 해커스쿨 FTZ 레벨 4 - 5","summary":"","date":"2022.09.27.","categories":["C-SEC","KOR"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAYBBAcJ/8QAFQEBAQAAAAAAAAAAAAAAAAAABQT/2gAMAwEAAhADEAAAAecqxk1Wh+RFETf/xAAbEAACAwEBAQAAAAAAAAAAAAAEBQECAwYAB//aAAgBAQABBQLk/ozxAp6+x250njzKluVRkeVbT188ot//xAAfEQACAgIBBQAAAAAAAAAAAAACAwEEERMSACFRktL/2gAIAQMBAT8B2ipFjU+yabLh3VyNorN1QQFT5GXGOYTKlxiOWAzy7zES0vA+0/PX/8QAHREAAgIDAAMAAAAAAAAAAAAAAgMBBBITIQAx0f/aAAgBAgEBPwGuMuOvJoppdUSYJeCVbhTaYb2I2CkSIJsG50wXM2nOMz0t7I5krnPR/PP/xAAmEAACAQIGAQQDAAAAAAAAAAABAgMEEgAFERMhMSIUFSNBMpLh/9oACAEBAAY/Aq/KJs3zY0sdJFQ5E0NXLTS5PPNOWhqKYMHtowj1Hqqa2QS7aIgAYuPccyzQZjIslRTpWqoaOojgndd7eXht1bXSxdOT4AnHLc/ficEaq61NHJQkSC/bjHzI8Wv4yo6eL92ySL0xxtONVU3qLmtTstYo0CljoSR9jrHCn9v5j//EABwQAQEAAgIDAAAAAAAAAAAAAAERACFBUTFxgf/aAAgBAQABPyHWJvxKWgfi8l2Skpfpos8FGJji06G0TyMHZz1jUCzgTuk9EUsRNJkdSKwnsSquMiP35+M//9oADAMBAAIAAwAAABCQH//EABgRAQEBAQEAAAAAAAAAAAAAAAERACFx/9oACAEDAQE/EE+TpdStOdiavBQ21X17v//EABkRAAIDAQAAAAAAAAAAAAAAABEhAAFBMf/aAAgBAgEBPxB+k27FYwBSsS4wEHlQrAzBqpT/xAAZEAEBAQEBAQAAAAAAAAAAAAABESEAMUH/2gAIAQEAAT8Qm5D613Vaz4sCNvgJQCOeKY0zpwewxUIRguqIInPHcqiaKJ4IxFQZhRsyiwbhBPoTrDrq6VSjvqK/Xv/Z"},"images":{"fallback":{"src":"/static/19e515bba8750881aa8c0a71dc14e660/8c915/C_Sec.jpg","srcSet":"/static/19e515bba8750881aa8c0a71dc14e660/2e6e0/C_Sec.jpg 270w,\n/static/19e515bba8750881aa8c0a71dc14e660/edde1/C_Sec.jpg 540w,\n/static/19e515bba8750881aa8c0a71dc14e660/8c915/C_Sec.jpg 1080w","sizes":"(min-width: 1080px) 1080px, 100vw"},"sources":[{"srcSet":"/static/19e515bba8750881aa8c0a71dc14e660/2e1cd/C_Sec.webp 270w,\n/static/19e515bba8750881aa8c0a71dc14e660/08f1e/C_Sec.webp 540w,\n/static/19e515bba8750881aa8c0a71dc14e660/c34ed/C_Sec.webp 1080w","type":"image/webp","sizes":"(min-width: 1080px) 1080px, 100vw"}]},"width":1080,"height":720}},"publicURL":"/static/19e515bba8750881aa8c0a71dc14e660/C_Sec.jpg"}}}}]}},"pageContext":{"slug":"/220927/"}},"staticQueryHashes":[]}