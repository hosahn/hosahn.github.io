{"componentChunkName":"component---src-templates-post-template-tsx","path":"/230418/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>1. Before we Begin</h2>\n<p>OWASP TOP 10 트랙의 두 번째 문제인 sanitize다. 이것 또한 전혀 어렵지 않았다.</p>\n<h2>2. Looking Glass</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/49374668991709989b8b29785538e82d/db5ee/sqli1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.083333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACKElEQVQoz4XO3UtTAQCG8WOWZGZqujBjftfUo66tpiYoEtRVMYT+gCDLyFIpSMFISFBStKX5sWlmKExUCITovovAbiIhjYKklZrTfenmds7OfCKpjAR94bn98QoaXSlZJ8sQ9WVoi84jnjqLWlOIKqMAVWbRZvHphq0yDCRkGlBnFZCcbSA1p5D0vDOc0Baj0ZUhRF7+wMGrH4m+NkPMjVniqj+hvvuZC51zGHttGPtsXOz5gtE8R/nAVy49s1E+ZEM02dCYviE++U5e3zza/kV0g4sIQoWdPdeX2XfTQeRtJ0KNE337KjvNH4JSa4i0gRDiCORaIX8cdC9ACLsyz97KBSKqfhBVu0R49RL6NidBaR02JCC0LZ+kUDLsJ80cQBySyB2W0VqD6MZDCGEVC4RXLhJRtcSBWjtht+wUdbh4OSNjeu3HMhWk/61C/5SCZUqh543C5IzCudEAKWYJ8blM7kgQ7WgI3cTGdjC8ZhntQyevZiWs72TG3ktMTMubjU/LjE3LTM7KlIwESLPsAkbW2Im6s0xM/QqaZgf57S60Jjf6Lg+ne1cptHgpHvRRMLjOcbMfzVOJnL+gsh3c/xuMrlshqt5B9D0XsY1uDjd5ULWskdjmJemRj+SudTLNgU0weyfwz8NDdSvENThJaHRxpMnN0RYPx1rXSO7wktrpI6P718PA7g//BWMbHMTfd6F64Cax2UNS6xrqdi8pj32kd289/B/8CWfUE9+YnFa9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/49374668991709989b8b29785538e82d/a59e9/sqli1.webp 192w,\n/static/49374668991709989b8b29785538e82d/0ca9f/sqli1.webp 384w,\n/static/49374668991709989b8b29785538e82d/dc9b9/sqli1.webp 768w,\n/static/49374668991709989b8b29785538e82d/e2c2f/sqli1.webp 1152w,\n/static/49374668991709989b8b29785538e82d/f3efb/sqli1.webp 1536w,\n/static/49374668991709989b8b29785538e82d/a9c0c/sqli1.webp 1916w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/49374668991709989b8b29785538e82d/3b721/sqli1.png 192w,\n/static/49374668991709989b8b29785538e82d/66595/sqli1.png 384w,\n/static/49374668991709989b8b29785538e82d/fe486/sqli1.png 768w,\n/static/49374668991709989b8b29785538e82d/d2d74/sqli1.png 1152w,\n/static/49374668991709989b8b29785538e82d/e8464/sqli1.png 1536w,\n/static/49374668991709989b8b29785538e82d/db5ee/sqli1.png 1916w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/49374668991709989b8b29785538e82d/fe486/sqli1.png\"\n            alt=\"sqli1.png\"\n            title=\"sqli1.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>문제를 확인해보니, 이런 식으로 로그인 화면이 나온다. web 챌린지이니 따로 스캔은 필요 없을 것 같고, 제일 먼저 sql injection 부터 시도해 보는 게 좋을 것 같다. easy 레이팅이니 그렇게 어려울리는 없다.</p>\n<p>burp로 캡처한 후 확인해보니</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">username=asdf&amp;password=asdf</code></pre></div>\n<p>식으로 정보가 전달된다. sql injection의 기본인 ‘cn을 넣어보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a22844e1409e34dd76330849544b038/c54b3/sqli2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.979166666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABE0lEQVQoz62S207DMAyG8/6vgrhCK0tJWql9Ey42sXWFNafm1B85aLtBQi1g6ZMTxfnj2GZPjw+oqgrVbod6/4yac+w5B69rcM7xIgTatkXXdej6vvi+79E0DYQQkFJCSFm8FAIMp1f8l71PBuztNGI4D1BKwVoLYy201jDGwHuPlNIqYoywzoMdj1ccDmeM46WIhBDKIUGBW40Ng8JluEIpXQSWZUHO+e63wlLKCOEr7d8IfBNUakKMYXWtfoLKxZxWcMbBaINMWd5ZnxWVh35qZw9GG/vh4V3AEiMyEQJSiEV4c1OsnuEmVy4vQHntLzBvA+xE4+JLDWj2iNuagtZaETTKwGiLeZ7hnCv+BolubconwKGj5vUzMEMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/3a22844e1409e34dd76330849544b038/a59e9/sqli2.webp 192w,\n/static/3a22844e1409e34dd76330849544b038/0ca9f/sqli2.webp 384w,\n/static/3a22844e1409e34dd76330849544b038/dc9b9/sqli2.webp 768w,\n/static/3a22844e1409e34dd76330849544b038/e2c2f/sqli2.webp 1152w,\n/static/3a22844e1409e34dd76330849544b038/f3efb/sqli2.webp 1536w,\n/static/3a22844e1409e34dd76330849544b038/8a15b/sqli2.webp 1678w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/3a22844e1409e34dd76330849544b038/3b721/sqli2.png 192w,\n/static/3a22844e1409e34dd76330849544b038/66595/sqli2.png 384w,\n/static/3a22844e1409e34dd76330849544b038/fe486/sqli2.png 768w,\n/static/3a22844e1409e34dd76330849544b038/d2d74/sqli2.png 1152w,\n/static/3a22844e1409e34dd76330849544b038/e8464/sqli2.png 1536w,\n/static/3a22844e1409e34dd76330849544b038/c54b3/sqli2.png 1678w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/3a22844e1409e34dd76330849544b038/fe486/sqli2.png\"\n            alt=\"sqli2.png\"\n            title=\"sqli2.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이런 식으로 error message가 뜨는걸 확인할 수 있다. error based sql injection은 메세지를 자세히 확인해보는게 중요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">select * from user where username = &lt;> and password = &lt;></code></pre></div>\n<p>그러니 우리가 username을 보낸다면</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">select * from user where username = 'asdf' and password = 'asdf'</code></pre></div>\n<p>이런식으로 들어갈 것이다. 그럼 단순하게 생각해서</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">username = cn' or 1 = 1; -- -</code></pre></div>\n<p>이렇게 넣는다면?</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">select * from user where username = 'cn' or 1=1; -- - (comment)</code></pre></div>\n<p>이렇게 되어서 1=1 (true), 즉 모든 유저를 출력시켜 줄 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d7b98ca5d0db1f2bd636571d1acfc3f1/c54b3/sqli3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.979166666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABJ0AAASdAHeZh94AAABLElEQVQoz62S62oCMRCF8/4P0v6p2+5Wt6JvUxCpurImk2RzPWViFbcU6pYGPgYyycnMmYinxwdUVYVqNkPz8ozXpkZd12iapsT5fI7lconVaoX1en2NbdtisViMeGtbCOze8V+rJwux+zigOxygiGCthTEGWusSnXOIMd6F9wGkLcR2K7HZ7HE8diDSRcR7X+CDU5fY7yW67gQpFUIIyDlfSSlNRsSYihDDFfHmpY0/CSoli9hZKN3t2c8+eghDClYPGOyAyL59EXxA5Ify71WxPVyMGRwEX7TSFQFwMsZCigk5pelDMWoA9QrBu8lTzcijITLCaQ9v+IucWxwdSLlUOeImj/ztARZUR4LpCZ4ITqmCVRpWEozUsP0Jw+lCX/Z1r2DJwF18vxnKJyJEoUnXX5fgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/d7b98ca5d0db1f2bd636571d1acfc3f1/a59e9/sqli3.webp 192w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/0ca9f/sqli3.webp 384w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/dc9b9/sqli3.webp 768w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/e2c2f/sqli3.webp 1152w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/f3efb/sqli3.webp 1536w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/8a15b/sqli3.webp 1678w\"\n              sizes=\"(max-width: 768px) 100vw, 768px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/d7b98ca5d0db1f2bd636571d1acfc3f1/3b721/sqli3.png 192w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/66595/sqli3.png 384w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/fe486/sqli3.png 768w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/d2d74/sqli3.png 1152w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/e8464/sqli3.png 1536w,\n/static/d7b98ca5d0db1f2bd636571d1acfc3f1/c54b3/sqli3.png 1678w\"\n            sizes=\"(max-width: 768px) 100vw, 768px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/d7b98ca5d0db1f2bd636571d1acfc3f1/fe486/sqli3.png\"\n            alt=\"sqli3.png\"\n            title=\"sqli3.png\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>이 또한 전혀 어렵지 않은 문제였다.</p>\n<h2>Source</h2>\n<ul>\n<li>Hack The Box 2023</li>\n<li>Me!</li>\n</ul>","frontmatter":{"title":"Hack The Box OWASP Track : sanitize 풀이","summary":"HTB OWASP TOP 10 Track - sanitize","date":"2023.04.18.","before":"2023.04.17.","after":"2023.04.20.","categories":["C-SEC","KOR","owasp","HTB"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/0lEQVQ4y9WSTWvUUBSG85Nc+BdcCSIiuBNcuBLEClWhGxFBUFcFRRcurC4UpQhOq606HT+GgrMYqEWUMs4k995zP5I7SW4myWTuJEfSsYKCiK4U3sU57znP5rzHEdQqqP5UPkfwCuefgX1eD2Zjn1cBx0DUmpm/gQUtObGSlZxMBS3Bs3RQMNeCZ38FowQUrAokbnXj+3c/vN6A5guy2ui3mvRNiz9r9Fee9qg7VbzelICqhieOoFMFhc9Gmqeap+Cazx9Vf2cInnG/DKkbc5KQfkTdWEGqRRbwzIeRAsu8icNJGakhZiQbknFIMGNYCBzzcsSsYdbQKmWYA+ZQjVgReTYhmJKhNNS1DpAyVBoxWHvcebu+hTbIApZpfnuxfX5u5cLcWre9U2W8HMnW8+7JE09uLbZxzEKV0IF1wJumYWRU/+CBa8eP3Ug1xZEsE7Ew/+ro4UdHDi1vrH5Cy7Hylx9s7t+3NH96HbMf4DhWvTOnrl9cuBmwwViLSSQeLr2/cunl1cvN7U6viHiVqs677XNnG/fubGIuQjmDSRn7Ggs6DmVhBBaAqcBcFBEkkuaaVSlgLjATkwgS30sDijkLlanh3WvnmkehNKGIA4g1GA1mKEykkkgmmptg5nATySSUiYbYhzr8vZwZil3JPf3UfjdnhYJvOf/1b/+v8Fd7D9BwAlXJzgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/1621cf3ee49b7152e9897e6aa0e738c9/ef927/sanitize.png","srcSet":"/static/1621cf3ee49b7152e9897e6aa0e738c9/74538/sanitize.png 59w,\n/static/1621cf3ee49b7152e9897e6aa0e738c9/d4f63/sanitize.png 117w,\n/static/1621cf3ee49b7152e9897e6aa0e738c9/ef927/sanitize.png 234w","sizes":"(min-width: 234px) 234px, 100vw"},"sources":[{"srcSet":"/static/1621cf3ee49b7152e9897e6aa0e738c9/3d5be/sanitize.webp 59w,\n/static/1621cf3ee49b7152e9897e6aa0e738c9/40d8a/sanitize.webp 117w,\n/static/1621cf3ee49b7152e9897e6aa0e738c9/4256f/sanitize.webp 234w","type":"image/webp","sizes":"(min-width: 234px) 234px, 100vw"}]},"width":234,"height":216.00000000000003}},"publicURL":"/static/1621cf3ee49b7152e9897e6aa0e738c9/sanitize.png"}}}}]}},"pageContext":{"slug":"/230418/"}},"staticQueryHashes":[]}